<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>لیست ویدیو با فریم اولیه</title>
  <style>
    body {
      margin: 0;
      background: black;
    }

    .video-wrapper {
      width: 100%;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }

    .video-placeholder, video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    video {
      position: absolute;
      top: 0;
      left: 0;
      display: none;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <!-- تکرار ۵ ویدیو با تصویر جدید -->
  <div class="video-wrapper" data-src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu.mp4">
    <img class="video-placeholder" src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu%20(1).png" alt="preview" />
    <video muted playsinline preload="auto"></video>
  </div>

  <div class="video-wrapper" data-src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu.mp4">
    <img class="video-placeholder" src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu%20(1).png" alt="preview" />
    <video muted playsinline preload="auto"></video>
  </div>

  <div class="video-wrapper" data-src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu.mp4">
    <img class="video-placeholder" src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu%20(1).png" alt="preview" />
    <video muted playsinline preload="auto"></video>
  </div>

  <div class="video-wrapper" data-src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu.mp4">
    <img class="video-placeholder" src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu%20(1).png" alt="preview" />
    <video muted playsinline preload="auto"></video>
  </div>

  <div class="video-wrapper" data-src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu.mp4">
    <img class="video-placeholder" src="https://raw.githubusercontent.com/ShopSto/O/main/Gray%20Illustrative%20Restaurant%20Menu%20(1).png" alt="preview" />
    <video muted playsinline preload="auto"></video>
  </div>

  <script>
    const wrappers = document.querySelectorAll(".video-wrapper");

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const wrapper = entry.target;
        const video = wrapper.querySelector("video");
        const placeholder = wrapper.querySelector(".video-placeholder");

        if (entry.isIntersecting && !video.dataset.started) {
          video.dataset.started = "true";

          setTimeout(() => {
            if (isInViewport(wrapper)) {
              video.src = wrapper.dataset.src;
              video.style.display = "block";
              placeholder.style.display = "none";
              video.play();

              video.onended = () => {
                video.pause();
                video.currentTime = video.duration;
              };
            }
          }, 2000); // دو ثانیه تأخیر
        }
      });
    }, {
      threshold: 0.6
    });

    wrappers.forEach(wrapper => observer.observe(wrapper));

    function isInViewport(el) {
      const rect = el.getBoundingClientRect();
      return rect.top < window.innerHeight && rect.bottom > 0;
    }
  </script>

</body>
</html>
